{% extends 'base.html' %}
{% block title %}–ê–Ω–∞–ª—ñ—Ç–∏–∫–∞{% endblock %}
{% block description %}–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞ —Ç–∞ –ø—Ä–æ–≥–Ω–æ–∑–∏ —Ñ—É—Ç–±–æ–ª—å–Ω–∏—Ö –º–∞—Ç—á—ñ–≤{% endblock %}
{% block content %}
  <div class="card" style="margin-bottom:20px;">
    <h1 class="title" style="margin:0;">–ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ —Ç–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h1>
  </div>

  <div class="grid cols-2">
    <!-- –¢–æ–ø –∫–æ–º–∞–Ω–¥–∏ -->
    <div class="card">
      <div class="section-title">üèÜ –¢–æ–ø –∫–æ–º–∞–Ω–¥–∏ –∑–∞ –æ—á–∫–∞–º–∏</div>
      <ul class="list">
        {% for standing in top_teams %}
        <li>
          <div style="display:flex;justify-content:space-between;align-items:center;">
            <div>
              <a href="{% url 'team_detail' standing.team.id %}" style="font-weight:600;">
                {{ forloop.counter }}. {{ standing.team.name }}
              </a>
              <div class="muted">{{ standing.league.name }}</div>
            </div>
            <div style="display:flex;gap:12px;align-items:center;">
              <span class="badge prob" style="background:var(--ok);">{{ standing.points }} –æ—á–æ–∫</span>
              <span class="muted">{{ standing.won }}-{{ standing.draw }}-{{ standing.lost }}</span>
            </div>
          </div>
        </li>
        {% empty %}
        <li class="muted">–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö</li>
        {% endfor %}
      </ul>
    </div>

    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ª—ñ–≥ -->
    <div class="card">
      <div class="section-title">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ª—ñ–≥</div>
      <ul class="list">
        {% for stat in leagues_stats %}
        <li>
          <div style="display:flex;justify-content:space-between;align-items:center;">
            <div>
              <a href="{% url 'league_detail' stat.league.id %}" style="font-weight:600;">
                {{ stat.league.name }}
              </a>
              <div class="muted">{{ stat.league.country }}</div>
            </div>
            <div style="display:flex;gap:8px;">
              <span class="badge">{{ stat.teams }} –∫–æ–º–∞–Ω–¥</span>
              <span class="badge">{{ stat.matches }} –º–∞—Ç—á—ñ–≤</span>
            </div>
          </div>
        </li>
        {% empty %}
        <li class="muted">–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö</li>
        {% endfor %}
      </ul>
    </div>
  </div>

  <!-- –ù–∞–π–±–ª–∏–∂—á—ñ –º–∞—Ç—á—ñ –∑ –ø—Ä–æ–≥–Ω–æ–∑–∞–º–∏ -->
  <div class="card" style="margin-top:20px;">
    <div class="section-title">‚öΩ –ù–∞–π–±–ª–∏–∂—á—ñ –º–∞—Ç—á—ñ –∑ –ø—Ä–æ–≥–Ω–æ–∑–∞–º–∏</div>
    <ul class="list">
      {% for match in upcoming_matches %}
      <li>
        <a href="{% url 'match_detail' match.id %}">
          <div style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:12px;">
            <div>
              <div style="font-weight:600;font-size:16px;margin-bottom:4px;">
                {{ match.home_team.name }} vs {{ match.away_team.name }}
              </div>
              <div class="muted">{{ match.date_utc|date:"Y-m-d H:i" }} ‚Ä¢ {{ match.league.name }}</div>
            </div>
            {% if match.forecast %}
            <div class="badges" style="margin:0;">
              <span class="badge prob">1: {{ match.forecast.prob_home|floatformat:2 }}</span>
              <span class="badge prob">X: {{ match.forecast.prob_draw|floatformat:2 }}</span>
              <span class="badge prob">2: {{ match.forecast.prob_away|floatformat:2 }}</span>
              {% if match.forecast.confidence == 'high' %}
              <span class="badge ok">–í–∏—Å–æ–∫–∞ –≤–ø–µ–≤–Ω–µ–Ω—ñ—Å—Ç—å</span>
              {% elif match.forecast.confidence == 'medium' %}
              <span class="badge warn">–°–µ—Ä–µ–¥–Ω—è –≤–ø–µ–≤–Ω–µ–Ω—ñ—Å—Ç—å</span>
              {% endif %}
            </div>
            {% endif %}
          </div>
        </a>
      </li>
      {% empty %}
      <li class="muted">–ù–µ–º–∞—î –º–∞—Ç—á—ñ–≤ –∑ –ø—Ä–æ–≥–Ω–æ–∑–∞–º–∏</li>
      {% endfor %}
    </ul>
  </div>

  <!-- –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω–∏–π –±–ª–æ–∫ -->
  <div class="card" style="margin-top:20px;background:linear-gradient(135deg, rgba(6, 182, 212, 0.1) 0%, rgba(34, 197, 94, 0.05) 100%);">
    <div class="section-title">‚ÑπÔ∏è –ü—Ä–æ –Ω–∞—à—É –∞–Ω–∞–ª—ñ—Ç–∏–∫—É</div>
    <p style="color:var(--muted);line-height:1.8;margin-bottom:16px;">
      –ù–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª—ñ–∑—É—î —Ç–∏—Å—è—á—ñ —Ñ—É—Ç–±–æ–ª—å–Ω–∏—Ö –º–∞—Ç—á—ñ–≤, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –º–∞—à–∏–Ω–Ω–µ –Ω–∞–≤—á–∞–Ω–Ω—è —Ç–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–Ω—ñ –º–æ–¥–µ–ª—ñ –¥–ª—è –Ω–∞–¥–∞–Ω–Ω—è –Ω–∞–π—Ç–æ—á–Ω—ñ—à–∏—Ö –ø—Ä–æ–≥–Ω–æ–∑—ñ–≤. 
      –ú–∏ –≤—Ä–∞—Ö–æ–≤—É—î–º–æ —Ñ–æ—Ä–º—É –∫–æ–º–∞–Ω–¥, —ñ—Å—Ç–æ—Ä—ñ—é –∑—É—Å—Ç—Ä—ñ—á–µ–π, —Ç—Ä–∞–≤–º–∏ –≥—Ä–∞–≤—Ü—ñ–≤ —Ç–∞ –±–∞–≥–∞—Ç–æ —ñ–Ω—à–∏—Ö —Ñ–∞–∫—Ç–æ—Ä—ñ–≤.
    </p>
    <div style="display:flex;gap:12px;flex-wrap:wrap;">
      <div class="badge ok">‚úì –¢–æ—á–Ω—ñ –ø—Ä–æ–≥–Ω–æ–∑–∏</div>
      <div class="badge ok">‚úì –î–µ—Ç–∞–ª—å–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
      <div class="badge ok">‚úì –†–µ–∞–ª-—Ç–∞–π–º –æ–Ω–æ–≤–ª–µ–Ω–Ω—è</div>
      <div class="badge ok">‚úì –ï–∫—Å–ø–µ—Ä—Ç–Ω–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞</div>
    </div>
  </div>
{% endblock %}

