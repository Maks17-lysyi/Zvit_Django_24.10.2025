{% extends 'base.html' %}
{% block title %}{{ match.home_team }} vs {{ match.away_team }}{% endblock %}
{% block content %}
  <div class="card" style="margin-bottom:20px;">
    <h1 class="title" style="margin:0 0 8px;">{{ match.home_team }} vs {{ match.away_team }}</h1>
    <div class="subtitle" style="margin:0;">{{ match.date_utc|date:"Y-m-d H:i" }} • {{ match.league.name }}</div>
  </div>
  {% if match.forecast %}
  <div class="card space-y">
    <div class="section-title">Прогноз</div>
    <div class="badges">
      <span class="badge prob">1 {{ match.forecast.prob_home|floatformat:2 }}</span>
      <span class="badge prob">X {{ match.forecast.prob_draw|floatformat:2 }}</span>
      <span class="badge prob">2 {{ match.forecast.prob_away|floatformat:2 }}</span>
      {% if match.forecast.prob_home > match.forecast.prob_draw and match.forecast.prob_home > match.forecast.prob_away %}
      <span class="badge ok">Фаворит: {{ match.home_team.name }}</span>
      {% elif match.forecast.prob_away > match.forecast.prob_draw %}
      <span class="badge ok">Фаворит: {{ match.away_team.name }}</span>
      {% else %}
      <span class="badge warn">Ймовірна нічия</span>
      {% endif %}
      {% if match.forecast.confidence == 'high' %}
      <span class="badge ok">Висока</span>
      {% elif match.forecast.confidence == 'medium' %}
      <span class="badge warn">Середня</span>
      {% else %}
      <span class="badge bad">Низька</span>
      {% endif %}
    </div>
    <div>
      <div class="section-title">Чому</div>
      <ul class="list">
        {% for f in match.forecast.explain %}
        <li>{{ f.name }} ({{ f.weight }}): {{ f.detail }}</li>
        {% endfor %}
      </ul>
    </div>
    <div class="muted">Останній перерахунок: {{ match.forecast.recalculated_at|date:"Y-m-d H:i" }}</div>
    <div class="muted">Дисклеймер: інформаційні цілі, не є порадою для ставок.</div>
  </div>
  {% else %}
  <div class="card">
    <div class="muted">Прогноз ще не згенеровано.</div>
  </div>
  {% endif %}

  <div class="grid cols-2" style="margin-top:20px;">
    <div class="card">
      <div class="section-title">Склад ({{ match.home_team.name }})</div>
      <ul class="list">
        {% for l in home_lineup %}
        <li>#{{ l.shirt_number }} — {{ l.player.name }} <span class="muted">{{ l.player.position }}</span></li>
        {% empty %}
        <li class="muted">Немає даних</li>
        {% endfor %}
      </ul>
    </div>
    <div class="card">
      <div class="section-title">Склад ({{ match.away_team.name }})</div>
      <ul class="list">
        {% for l in away_lineup %}
        <li>#{{ l.shirt_number }} — {{ l.player.name }} <span class="muted">{{ l.player.position }}</span></li>
        {% empty %}
        <li class="muted">Немає даних</li>
        {% endfor %}
      </ul>
    </div>
  </div>

  <div class="card" style="margin-top:20px;">
    <div class="section-title">Топ гравці матчу</div>
    <ul class="list">
      {% for r in top_ratings %}
      <li>{{ r.player.name }} ({{ r.team.name }}) — {{ r.rating|floatformat:2 }}</li>
      {% empty %}
      <li class="muted">Немає даних</li>
      {% endfor %}
    </ul>
  </div>

  <div class="grid cols-2" style="margin-top:20px;">
    <div class="card">
      <div class="section-title">Трансфери</div>
      <ul class="list">
        <li class="muted">Останні трансфери команд</li>
        <li class="muted">Трансферні новини</li>
        <li class="muted">Оцінки трансферів</li>
        <li class="muted">Аналіз впливу на команди</li>
      </ul>
    </div>
    <div class="card">
      <div class="section-title">Інтерв'ю та аналітика</div>
      <ul class="list">
        <li class="muted">Інтерв'ю з гравцями</li>
        <li class="muted">Аналіз тренерів</li>
        <li class="muted">Експертні коментарі</li>
        <li class="muted">Тактичний аналіз</li>
      </ul>
    </div>
  </div>
{% endblock %}

